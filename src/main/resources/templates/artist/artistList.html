<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>아티스트 목록</title>
    <!--BootStap-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

    <link rel="stylesheet" href="css/artistList.css" />
    <link rel="stylesheet" href="css/footer.css" />
    <link rel="stylesheet" href="css/artistList.css" />
    <!--Jquery-->
    <script
            src="https://code.jquery.com/jquery-3.7.0.min.js">
    </script>
</head>
<body>
<div>
    <th:block th:include="header"></th:block>
</div>
<form name="artistSearch" action="/artistList" method="get" onsubmit="return submitForm()">
    <div class="search">
        <input type="text" name="searchKeyword" id="artistSearch" placeholder="아티스트 검색" th:value="${searchKeyword}">
        <input type="image" id="searchimg" src="https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/icon/search.png">
    </div>
</form>

<script th:inline="javascript">

</script>

<table>
    <thead>
    <tr>
        <th>프로필사진</th>
        <th>팀명</th>
        <th>공연예정일</th>
        <th>Fan</th>
        <th>구독하기</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="artist: ${artistList}">
        <td><img src="https://i.postimg.cc/yYYd1HV1/katara.jpg" alt="img"></td>
        <td class="allCell" th:text="${artist.teamname}">Ninja</td>
        <td class="firstCell" th:each="date: ${dateList}" th:if="${artist.teamname == date.team_name}" th:text="${date.date}"></td>
        <td class="secondCell">-</td>
        <td>120</td>
        <td>
            <button class="fan">♡</button>
        </td>

    </tr>


    <tfoot>
    <td colspan="5" class="tablefoot"></td>
    </tfoot>
</table>
<div id="paging">
    <th:block th:each="page : ${#numbers.sequence(startPage, endPage)}">
        <a th:if="${page != nowPage}" th:href="@{artistList(page = ${page-1})}" th:text="${page}" style="color: black"></a>
        <strong th:if="${page == nowPage}" th:text="${page}" style="color: red"></strong>
    </th:block>
</div>
</body>


<script th:inline="javascript">
document.addEventListener("DOMContentLoaded", function() {
    var rows = document.querySelectorAll("tbody tr");
    var allCell = document.querySelectorAll(".allCell")



console.log(allCell.length);

    for (var i = 0; i < allCell.length; i++) {
    rows.forEach(function(row) {
      var tdCount = row.querySelectorAll("td").length;
      var secondCell = row.querySelectorAll(".secondCell");

      if (tdCount === 6) {
          console.log(tdCount);
            secondCell[i].style.display = "none";
          } else {
            secondCell[i].style.display = "table-cell";
          }
          });
      }

  });
</script>


<!--footer-->
<footer>
    <div id="footer">
        <th:block th:include="footer"></th:block>
    </div>
</footer>
</html>